<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyC0KIgBiozX-3YWjI729nE7GPFYaRZ9Tao&sensor=false">
</script>

<script type="text/javascript">
$(document).ready(function(){
  var pinColor = "FE7569";

  var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor,
    new google.maps.Size(21, 34),
    new google.maps.Point(0,0),
    new google.maps.Point(10, 34));

  var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
    new google.maps.Size(40, 37),
    new google.maps.Point(0, 0),
    new google.maps.Point(12, 35));

  var myOptions = {
    center: new google.maps.LatLng('<%= @image.gps_latitude.gsub(/\s+.*/,'') %>', '<%= @image.gps_longitude.gsub(/\s+.*/,'') %>'),
    zoom: 14,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  var marker = new google.maps.Marker({
    map: map,
    position: new google.maps.LatLng('<%= @image.gps_latitude.gsub(/\s+.*/,'') %>', '<%= @image.gps_longitude.gsub(/\s+.*/,'') %>'),
    icon: pinImage,
    shadow: pinShadow
  });
});
</script>


<div class="page-header">
  <h1><%= @image.title %><br /></h1>
</div>


<div class="tabbable">
  <ul class="nav nav-tabs">
    <li class="active"><a href="#1" data-toggle="tab">Image</a></li>
    <li><a href="#2" data-toggle="tab">EXIF Data</a></li>
    <li><a href="#3" data-toggle="tab">Other sizes</a></li>
    <li><a href="#4" data-toggle="tab">Map</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="1">
      <h2>Large:</h2>
      <%= link_to(image_tag(@image.attachment.url(:large)), @image.attachment.url, :class => "top_up") unless @image.attachment.nil? %><br />
      <%= link_to "edit", :action => "edit", :id => @image %>
    </div>
    <div class="tab-pane" id="2">
      <div id="exif_data">
        <table style="width:500px" class="table-striped">
          <tr>
            <th class="left-header">Model:</th>
            <td><%= link_to @image.model, '#', :title => "Show all images taken with #{@image.model}" %></td>
          </tr>
          <tr>
            <th class="left-header">Focal length:</th>
            <td><%= @image.focal_length %></td>
          </tr>
          <tr>
            <th class="left-header">Shutter speed:</th>
            <td><%= @image.shutter_speed %></td>
          </tr>
          <tr>
            <th class="left-header">Aperture:</th>
            <td><%= @image.aperture %></td>
          </tr>
          <tr>
            <th class="left-header">ISO:</th>
            <td><%= @image.iso %></td>
          </tr>
          <tr>
            <th class="left-header">White balance:</th>
            <td><%= @image.white_balance %></td>
          </tr>
          <tr>
            <th class="left-header">Flash:</th>
            <td><%= @image.flash %></td>
          </tr>
          <tr>
            <th class="left-header">Date:</th>
            <td><%= @image.date_time_original %></td>
          </tr>
          <tr>
            <th class="left-header">GPS Altitude:</th>
            <td><%= @image.gps_altitude %></td>
          </tr>
          <tr>
            <th class="left-header">GPS Latitude:</th>
            <td><%= @image.gps_latitude %></td>
          </tr>
          <tr>
            <th class="left-header">GPS Longitude:</th>
            <td><%= @image.gps_longitude %></td>
          </tr>
        </table>
      </div>
    </div>
    <div class="tab-pane" id="3">
      <h3>Medium:</h3>
      <%= image_tag @image.attachment.url(:medium) %>
      <h4>Thumb:</h4>
      <%= image_tag @image.attachment.url(:thumb) %>
    </div>
    <div class="tab-pane" id="4">
      <div id="map_canvas" class="googlemaps"></div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs()
    })
</script>
